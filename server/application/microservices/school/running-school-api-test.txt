Contuing tesing school microserice apis:
PUT:https://2etoo7woae.execute-api.us-east-1.amazonaws.com/prod/schools/2ddccc69-f82b-45cd-95aa-d3d8320625dd

Request body:
  {
    "schoolName": "Test School ONE Updated",
    "maxStudentCapacity": 1200,
    "description": "Updated description for the school"
  }
  response:
  {
    "status": 500,
    "error": "Special numeric value NaN is not allowed"
}


Post academic year: https://2etoo7woae.execute-api.us-east-1.amazonaws.com/prod/schools/2ddccc69-f82b-45cd-95aa-d3d8320625dd/academic-years
body:
  {
    "yearName": "2024-2025",
    "startDate": "2024-09-01",
    "endDate": "2025-06-30",
    "isCurrent": true,
    "description": "Main academic year for 2024-2025",
    "yearCode":"2025-26"
  }

  response 
  {
    "message": "Academic year not found",
    "error": "Not Found",
    "statusCode": 404
}

Get Academic years:
https://2etoo7woae.execute-api.us-east-1.amazonaws.com/prod/schools/2ddccc69-f82b-45cd-95aa-d3d8320625dd/academic-years

response: {
    "statusCode": 500,
    "message": "Internal server error"
}

POST Department:
https://2etoo7woae.execute-api.us-east-1.amazonaws.com/prod/schools/2ddccc69-f82b-45cd-95aa-d3d8320625dd/departments

body:
  {
    "departmentName": "Mathematics",
    "departmentCode": "MATH",
    "headOfDepartment": "Dr. Jane Smith",
    "description": "Mathematics and Statistics Department"
  }
  response:
  {
    "statusCode": 500,
    "message": "Internal server error"
}

GET departments: https://2etoo7woae.execute-api.us-east-1.amazonaws.com/prod/schools/2ddccc69-f82b-45cd-95aa-d3d8320625dd/departments

response:
{
    "statusCode": 500,
    "message": "Internal server error"
}


looking at the school service logs:
Timestamp (UTC-05:00)
	
Message
	
Task
	
Container

Timestamp (UTC-05:00)
	
Message
	
Task
	
Container

October 12, 2025, 20:47
[31m[Nest] 1 - [39m10/13/2025, 1:47:11 AM [31m ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mUser: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action[39m
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
AccessDeniedException: User: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at throwDefaultError (/app/node_modules/@smithy/smithy-client/dist-cjs/index.js:287:22)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at /app/node_modules/@smithy/smithy-client/dist-cjs/index.js:296:9
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at de_CommandError (/app/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async /app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:8:24
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async /app/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async /app/node_modules/@smithy/core/dist-cjs/index.js:121:20
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async /app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:254:46
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async /app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:47
at async SchoolsService.getDepartments (/app/dist/microservices/school/main.js:358:24)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[31m[Nest] 1 - [39m10/13/2025, 1:46:28 AM [31m ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mUser: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action[39m
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
AccessDeniedException: User: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at throwDefaultError (/app/node_modules/@smithy/smithy-client/dist-cjs/index.js:287:22)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at /app/node_modules/@smithy/smithy-client/dist-cjs/index.js:296:9
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at de_CommandError (/app/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:8:24
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/core/dist-cjs/index.js:121:20
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:254:46
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async ValidationService.departmentCodeExists (/app/dist/microservices/school/main.js:1005:28)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
Error checking department code uniqueness: AccessDeniedException: User: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at throwDefaultError (/app/node_modules/@smithy/smithy-client/dist-cjs/index.js:287:22)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at /app/node_modules/@smithy/smithy-client/dist-cjs/index.js:296:9
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at de_CommandError (/app/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:8:24
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/core/dist-cjs/index.js:121:20
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:254:46
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async /app/node_modules/@aws-sdk/middleware-logger/dist-cjs/index.js:33:22
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
at async ValidationService.departmentCodeExists (/app/dist/microservices/school/main.js:1005:28) {
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'$fault': 'client',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'$response': HttpResponse {
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
statusCode: 400,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
reason: 'Bad Request',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
headers: {
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
server: 'Server',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
date: 'Mon, 13 Oct 2025 01:46:28 GMT',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'content-type': 'application/x-amz-json-1.0',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'content-length': '401',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
connection: 'keep-alive',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'x-amzn-requestid': 'J5DRTHNSQ6DPS762LKOV8M0IA7VV4KQNSO5AEMVJF66Q9ASUAAJG',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'x-amz-crc32': '2569081290'
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
},
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
body: IncomingMessage {
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_events: [Object],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_readableState: [ReadableState],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_maxListeners: undefined,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
socket: null,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
httpVersionMajor: 1,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
httpVersionMinor: 1,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
httpVersion: '1.1',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
complete: true,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
rawHeaders: [Array],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
rawTrailers: [],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
joinDuplicateHeaders: undefined,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
aborted: false,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
upgrade: false,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
url: '',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
method: null,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
statusCode: 400,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
statusMessage: 'Bad Request',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
client: [TLSSocket],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_consuming: false,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_dumped: false,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
req: [ClientRequest],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
_eventsCount: 2,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(shapeMode)]: true,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(kCapture)]: false,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(kHeaders)]: [Object],
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(kHeadersCount)]: 14,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(kTrailers)]: null,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
[Symbol(kTrailersCount)]: 0
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
}
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
},
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'$retryable': undefined,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
'$metadata': {
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
httpStatusCode: 400,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
requestId: 'J5DRTHNSQ6DPS762LKOV8M0IA7VV4KQNSO5AEMVJF66Q9ASUAAJG',
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
extendedRequestId: undefined,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
cfId: undefined,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
attempts: 1,
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
totalRetryDelay: 0
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
},
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
__type: 'com.amazon.coral.service#AccessDeniedException'
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:46
}
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
[31m[Nest] 1 - [39m10/13/2025, 1:45:24 AM [31m ERROR[39m [38;5;3m[ExceptionsHandler] [39m[31mUser: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action[39m
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
AccessDeniedException: User: arn:aws:sts::346698404105:assumed-role/tenant-template-stack-basic-schoolABACRoleA23F6CA2-1Ge1qzpOUBrK/AssumeRoleSession is not authorized to perform: dynamodb:Query on resource: arn:aws:dynamodb:us-east-1:346698404105:table/school-table-v2-basic/index/GSI1 because no identity-based policy allows the dynamodb:Query action
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at throwDefaultError (/app/node_modules/@smithy/smithy-client/dist-cjs/index.js:287:22)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at /app/node_modules/@smithy/smithy-client/dist-cjs/index.js:296:9
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at de_CommandError (/app/node_modules/@aws-sdk/client-dynamodb/dist-cjs/index.js:2359:14)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at async /app/node_modules/@smithy/middleware-serde/dist-cjs/index.js:8:24
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at async /app/node_modules/@aws-sdk/lib-dynamodb/dist-cjs/index.js:173:30
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at async /app/node_modules/@smithy/core/dist-cjs/index.js:121:20
b0dc8965ffc54ba5b582bfd9d4c04288
school
October 12, 2025, 20:45
at async /app/node_modules/@smithy/middleware-retry/dist-cjs/index.js:254:46
b0dc8965ffc54ba5b582bfd9d4c04288
school
